<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ACSF Predictor 2026 - Exact Match</title>
    <style>
        :root {
            --bg-color: #00151a;
            --accent-cyan: #00f2ff;
            --card-bg: rgba(0, 40, 50, 0.4);
            --text-white: #e0faff;
            --line-color: rgba(0, 242, 255, 0.3);
            --win-gold: #ffd700;
        }

        body {
            background-color: var(--bg-color);
            background-image: radial-gradient(circle at center, #002b36 0%, #00151a 100%);
            color: var(--text-white);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            overflow-x: auto;
        }

        .bracket-scroll-wrapper {
            padding: 50px;
            min-width: 1600px;
            display: flex;
            justify-content: center;
        }

        .bracket-container {
            position: relative;
            display: flex;
            align-items: center;
        }

        .bracket-side {
            display: flex;
            gap: 60px;
        }

        .round {
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            width: 180px;
            z-index: 2;
            min-height: 850px;
        }

        .round-title {
            text-align: center;
            font-size: 0.65em;
            color: var(--accent-cyan);
            padding: 4px;
            border: 1px solid var(--accent-cyan);
            background: transparent;
            letter-spacing: 3px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .matchup {
            background: var(--card-bg);
            border: 1px solid rgba(0, 242, 255, 0.15);
            margin: 12px 0;
            position: relative;
        }

        .team {
            display: flex;
            align-items: center;
            height: 42px;
            padding: 0 12px;
            font-size: 0.85em;
            border-bottom: 1px solid rgba(255,255,255,0.03);
            cursor: pointer;
            transition: all 0.2s;
        }

        .team:hover { background: rgba(0, 242, 255, 0.08); }
        .team img { width: 20px; height: 20px; margin-right: 12px; object-fit: contain; }
        .team span { flex-grow: 1; overflow: hidden; white-space: nowrap; }

        /* The Seeded Teams Style */
        .team.seeded { color: var(--accent-cyan); font-weight: bold; }

        .score-box { display: flex; align-items: center; gap: 5px; }
        .score-input {
            width: 25px;
            background: transparent;
            border: none;
            border-bottom: 1px solid var(--line-color);
            color: var(--accent-cyan);
            text-align: center;
            font-size: 0.8em;
        }

        .pens-toggle {
            font-size: 0.6em;
            background: transparent;
            border: 1px solid #334;
            color: #556;
            cursor: pointer;
            padding: 1px 4px;
        }

        .pens-toggle.active { color: var(--win-gold); border-color: var(--win-gold); }
        .team.winner { color: var(--win-gold); }
        .team.empty { color: #44585d; font-style: italic; font-size: 0.75em; }

        .final-center {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 220px;
            margin: 0 60px;
            z-index: 2;
        }

        .final-center .round-title {
            background: var(--accent-cyan);
            color: #000;
            width: 100%;
        }

        #connector-canvas {
            position: absolute;
            top: 0; left: 0; 
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 1;
        }
    </style>
</head>
<body>

    <div class="bracket-scroll-wrapper">
        <div class="bracket-container" id="bracket-root">
            <svg id="connector-canvas"></svg>

            <div class="bracket-side">
                <div class="round"><div class="round-title">RD 1</div><div id="r1-L"></div></div>
                <div class="round"><div class="round-title">RD 16</div><div id="r16-L"></div></div>
                <div class="round"><div class="round-title">QF</div><div id="qf-L"></div></div>
                <div class="round"><div class="round-title">SF</div><div id="sf-L"></div></div>
            </div>

            <div class="final-center">
                <div class="round-title">FINAL</div>
                <div class="matchup" id="match-final" style="width:100%;">
                    <div class="team empty" id="final-a" onclick="manualAdvance('final-a')"><span>TBD</span></div>
                    <div class="team empty" id="final-b" onclick="manualAdvance('final-b')"><span>TBD</span></div>
                </div>
            </div>

            <div class="bracket-side">
                <div class="round"><div class="round-title">SF</div><div id="sf-R"></div></div>
                <div class="round"><div class="round-title">QF</div><div id="qf-R"></div></div>
                <div class="round"><div class="round-title">RD 16</div><div id="r16-R"></div></div>
                <div class="round"><div class="round-title">RD 1</div><div id="r1-R"></div></div>
            </div>
        </div>
    </div>

<script>
    const LOGOS = {
        "Aston Villa": "https://resources.premierleague.com/premierleague25/badges-alt/7.svg",
        "Leeds United": "https://resources.premierleague.com/premierleague25/badges-alt/2.svg",
        "Elche": "https://ssl.gstatic.com/onebox/media/sports/logos/uyyqqxLIYT_lQIXRyMI_RA_48x48.png",
        "Inter Miami": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747755405/assets/logos/mls-clubs/Club_Logo-Miami_tyqe64.png",
        "Atlanta United": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747499879/assets/logos/mls-clubs/Club_Logo-Atlanta_jtk7ku.png",
        "Seattle": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1748265125/assets/logos/mls-clubs/Club_Logo-Seattle_e6jk2x.png",
        "Columbus": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747500414/assets/logos/mls-clubs/Club_Logo-Columbus_light_z3eq8l.png",
        "San Diego": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1748261519/assets/logos/mls-clubs/Club_Logo-San_Diego_nwpyul.png",
        "Colorado": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747500322/assets/logos/mls-clubs/Club_Logo-Colorado_n5kpss.png",
        "Salt Lake": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747776403/assets/logos/mls-clubs/Club_Logo-Salt_Lake_City_hpvde5.png",
        "Minnesota": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747754826/assets/logos/mls-clubs/Club_Logo-Minnesota_ftweor.png",
        "San Jose": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1748262048/assets/logos/mls-clubs/Club_Logo-San_Jose_opzlmo.png",
        "Charlotte": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747500045/assets/logos/mls-clubs/Club_Logo-Charlotte_p7sznf.png",
        "LA Galaxy": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747755165/assets/logos/mls-clubs/Club_Logo-LA_Galaxy_fg0wjp.png",
        "Orlando": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747769281/assets/logos/mls-clubs/Club_Logo-Orlando_ryyn7a.png",
        "LAFC": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v174775309/assets/logos/mls-clubs/Club_Logo-LAFC_djrhru.png",
        "New England": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1766020750/assets/NE_Logo_PRI_FC_RGB_480x480_fdx2us.png",
        "Chicago": "https://images.mlssoccer.com/image/upload/t_club_logo_medium/v1747500178/assets/logos/mls-clubs/Club_Logo-Chicago_jm2yev.png",
        "Brentford": "https://resources.premierleague.com/premierleague25/badges-alt/94.svg",
        "Leicester": "https://upload.wikimedia.org/wikipedia/en/thumb/2/2d/Leicester_City_crest.svg/1200px-Leicester_City_crest.svg.png",
        "Bournemouth": "https://resources.premierleague.com/premierleague25/badges-alt/91.svg",
        "West Ham": "https://resources.premierleague.com/premierleague25/badges-alt/21.svg",
        "Valencia": "https://ssl.gstatic.com/onebox/media/sports/logos/QPbjvDwI_0Wuu4tCS2O6uw_48x48.png",
        "Real Betis": "https://ssl.gstatic.com/onebox/media/sports/logos/XDClkrMKtkm3UTP2YKN6oQ_48x48.png",
        "Osasuna": "https://ssl.gstatic.com/onebox/media/sports/logos/pk-hNCNpGM_JDoHHvLVF-Q_48x48.png",
        "Levante": "https://ssl.gstatic.com/onebox/media/sports/logos/SQB-jlVosxVV1Ce79FhbOA_48x48.png",
        "Celta Vigo": "https://ssl.gstatic.com/onebox/media/sports/logos/wpdhixHP_sloegfP0UlwAw_48x48.png"
    };

    const INITIAL_DATA = {
        'r1-L': [["San Diego", "Celta Vigo"], ["Seattle", "Valencia"], ["LAFC", "Leicester"], ["Salt Lake", "West Ham"], ["Minnesota", "Real Betis"]],
        'r1-R': [["LA Galaxy", "Bournemouth"], ["Columbus", "Levante"], ["Colorado", "Brentford"], ["Orlando", "New England"], ["Charlotte", "Osasuna"], ["San Jose", "Chicago"]],
        'r16-L': [["Leeds United", null], [null, null], [null, "Atlanta United"], [null, "Aston Villa"]],
        'r16-R': [["Inter Miami", null], [null, null], ["Elche", null], [null, null]],
        'qf-L': [[null,null],[null,null]], 'qf-R': [[null,null],[null,null]],
        'sf-L': [[null,null]], 'sf-R': [[null,null]]
    };

    const PATHS = {
        'r1-L-0': 'r16-L-0-b', 'r1-L-1': 'r16-L-1-a', 'r1-L-2': 'r16-L-1-b', 'r1-L-3': 'r16-L-2-b', 'r1-L-4': 'r16-L-3-b',
        'r1-R-0': 'r16-R-0-b', 'r1-R-1': 'r16-R-1-a', 'r1-R-2': 'r16-R-1-b', 'r1-R-3': 'r16-R-2-b', 'r1-R-4': 'r16-R-3-a', 'r1-R-5': 'r16-R-3-b',
        'r16-L-0': 'qf-L-0-a', 'r16-L-1': 'qf-L-0-b', 'r16-L-2': 'qf-L-1-a', 'r16-L-3': 'qf-L-1-b',
        'r16-R-0': 'qf-R-0-a', 'r16-R-1': 'qf-R-0-b', 'r16-R-2': 'qf-R-1-a', 'r16-R-3': 'qf-R-1-b',
        'qf-L-0': 'sf-L-0-a', 'qf-L-1': 'sf-L-0-b', 'qf-R-0': 'sf-R-0-a', 'qf-R-1': 'sf-R-0-b',
        'sf-L-0': 'final-a', 'sf-R-0': 'final-b'
    };

    function init() {
        Object.keys(INITIAL_DATA).forEach(roundId => {
            const container = document.getElementById(roundId);
            INITIAL_DATA[roundId].forEach((m, i) => {
                container.innerHTML += `
                <div class="matchup" id="match-${roundId}-${i}">
                    ${createTeamHTML(`${roundId}-${i}-a`, m[0])}
                    ${createTeamHTML(`${roundId}-${i}-b`, m[1])}
                </div>`;
            });
        });
        window.addEventListener('load', drawLines);
        window.addEventListener('resize', drawLines);
        setTimeout(drawLines, 200);
    }

    function createTeamHTML(id, name) {
        const isSeeded = name !== null;
        return `
            <div class="team ${!name ? 'empty' : ''} ${isSeeded ? 'seeded' : ''}" id="${id}" onclick="manualAdvance('${id}')">
                <img src="${name ? LOGOS[name] : ''}" style="display:${name ? 'block' : 'none'}">
                <span>${name || 'TBD'}</span>
                <div class="score-box" onclick="event.stopPropagation()">
                    <input type="number" class="score-input" placeholder="0" onchange="autoCheck('${id}')">
                    <button class="pens-toggle" onclick="togglePens(this, '${id}')">P</button>
                </div>
            </div>`;
    }

    function togglePens(btn, id) {
        btn.classList.toggle('active');
        autoCheck(id);
    }

    function autoCheck(id) {
        const mId = id.substring(0, id.lastIndexOf('-'));
        const teamA = document.getElementById(mId + '-a');
        const teamB = document.getElementById(mId + '-b');
        const sA = parseInt(teamA.querySelector('.score-input').value) || 0;
        const sB = parseInt(teamB.querySelector('.score-input').value) || 0;
        const pA = teamA.querySelector('.pens-toggle').classList.contains('active');
        const pB = teamB.querySelector('.pens-toggle').classList.contains('active');

        if (sA > sB || (sA === sB && pA)) advance(teamA, mId);
        else if (sB > sA || (sB === sA && pB)) advance(teamB, mId);
    }

    function manualAdvance(id) {
        const el = document.getElementById(id);
        if (el.classList.contains('empty')) return;
        advance(el, id.substring(0, id.lastIndexOf('-')));
    }

    function advance(winnerEl, matchId) {
        const pathKey = matchId.replace('match-','');
        const targetId = PATHS[pathKey];
        if (!targetId) return;

        const target = document.getElementById(targetId);
        
        // FIX: Protection for seeded teams in Round 16
        // If the target slot is already occupied by an initial seeded team (Leeds, Inter Miami, etc.), stop.
        const isTargetSeeded = target.classList.contains('seeded');
        if (isTargetSeeded) return;

        const name = winnerEl.querySelector('span').innerText;
        winnerEl.parentElement.querySelectorAll('.team').forEach(t => t.classList.remove('winner'));
        winnerEl.classList.add('winner');
        
        target.classList.remove('empty');
        target.querySelector('img').src = LOGOS[name];
        target.querySelector('img').style.display = 'block';
        target.querySelector('span').innerText = name;
    }

    function drawLines() {
        const svg = document.getElementById('connector-canvas');
        svg.innerHTML = '';
        const root = document.getElementById('bracket-root').getBoundingClientRect();

        Object.keys(PATHS).forEach(mKey => {
            const side = mKey.includes('-L-') || mKey.includes('sf-L') ? 'L' : 'R';
            const startEl = document.getElementById('match-' + mKey);
            const targetEl = document.getElementById(PATHS[mKey]);
            if (!startEl || !targetEl) return;

            const start = startEl.getBoundingClientRect();
            const end = targetEl.getBoundingClientRect();

            let x1 = (side === 'L' ? start.right : start.left) - root.left;
            let y1 = start.top + start.height/2 - root.top;
            let x2 = (side === 'L' ? end.left : end.right) - root.left;
            let y2 = end.top + end.height/2 - root.top;

            // Step lines
            const midX = x1 + (x2 - x1) / 2;
            svg.innerHTML += `<path d="M ${x1} ${y1} H ${midX} V ${y2} H ${x2}" stroke="var(--line-color)" fill="none" stroke-width="1.5"/>`;
        });
    }

    init();
</script>
</body>
</html>
